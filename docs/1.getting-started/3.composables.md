---
title: Composables
description: 
---

## Composables

Composables to fetch content are automatically generated by WPNuxt [based on predefined queries](#based-on-predefined-queries) as well as your own [custom queries](#based-on-custom-queries).

There's also a few [other composables provided by WPNuxt](#other-composables-provided-by-wpnuxt)

### Based on Predefined queries

[Check them here](https://github.com/vernaillen/wpnuxt-module/tree/main/src/runtime/queries)

Can be overwritten by providen a custom query with the same name.

#### Posts

WPNuxt provides 4 [GraphQL queries to fetch posts](https://github.com/vernaillen/wpnuxt-module/blob/main/src/runtime/queries/Posts.gql), which result in these generated composables:

::code-group
  ```ts twoslash [Composables]
  import type { PostFragment } from '#graphql-operations'

  const { data: posts } = await usePosts()
  const { data: last3Posts } = await usePosts({ limit: 3 })
  const { data: postByUri } = await usePostByUri({ uri: 'givenSlug' })
  const { data } = await usePostById({ id: 'givenDatabaseId' })
  const post: PostFragment = data.value
  ```

  ```typescript [PostFragment type]
  export type PostFragment = {
    content?: string | null, 
    title?: string | null, 
    excerpt?: string | null, 
    contentTypeName: string, 
    databaseId: number, 
    date?: string | null, 
    dateGmt?: string | null, 
    desiredSlug?: string | null, 
    enclosure?: string | null, 
    guid?: string | null, 
    id: string, 
    isContentNode: boolean, 
    isPreview?: boolean | null, 
    isRestricted?: boolean | null, 
    isTermNode: boolean, 
    link?: string | null, 
    modified?: string | null, 
    modifiedGmt?: string | null, 
    previewRevisionDatabaseId?: number | null, 
    previewRevisionId?: string | null, 
    slug?: string | null, 
    status?: string | null, 
    uri?: string | null, 
    featuredImageDatabaseId?: number | null, 
    featuredImageId?: string | null, 
    editorBlocks?: Array<{ 
      apiVersion?: number | null, 
      blockEditorCategoryName?: string | null, 
      clientId?: string | null, 
      cssClassNames?: Array<string | null> | null, 
      isDynamic: boolean, name?: string | null, 
      parentClientId?: string | null, 
      renderedHtml?: string | null, 
      innerBlocks?: Array<{ 
        apiVersion?: number | null, 
        blockEditorCategoryName?: string | null, 
        clientId?: string | null, 
        cssClassNames?: Array<string | null> | null, 
        isDynamic: boolean, name?: string | null, 
        parentClientId?: string | null, 
        renderedHtml?: string | null 
      } | null 
    };
  ```

  ```graphql [GraphQL Queries]
  #import "~/.queries/fragments/Post.fragment.gql"

  query Posts($limit: Int = 10) {
    posts(first: $limit) {
      nodes {
        ...Post
      }
    }
  }
  query PostByUri($uri: String!) {
    nodeByUri(uri: $uri) {
      ...Post
    }
  }
  query PostById($id: ID!, $asPreview: Boolean = false) {
    post(id: $id, idType: DATABASE_ID, asPreview: $asPreview) {
      ...Post
    }
  }
  ```

  ```graphql [GraphQL Fragment]
  #import "~/.queries/fragments/NodeWithExcerpt.fragment.gql";
  #import '~/.queries/fragments/ContentNode.fragment.gql';
  #import '~/.queries/fragments/NodeWithFeaturedImage.fragment.gql';
  #import '~/.queries/fragments/CoreGallery.fragment.gql';
  #import '~/.queries/fragments/CoreImage.fragment.gql';
  #import '~/.queries/fragments/CoreParagraph.fragment.gql';
  #import '~/.queries/fragments/CoreQuote.fragment.gql';
  #import '~/.queries/fragments/EditorBlock.fragment.gql';

  fragment Post on Post {
    ...NodeWithExcerpt
    ...ContentNode
    ...NodeWithFeaturedImage
    content
    title
    editorBlocks {
      ...EditorBlock
      innerBlocks {
        ...EditorBlock
      }
    }
  }
  ```
::

#### Pages

WPNuxt provides 3 [queries to fetch pages](https://github.com/vernaillen/wpnuxt-module/blob/main/src/runtime/queries/Page.gql), which result in these generated composables:

```ts twoslash [pages]
const { data: pages } = await usePages()
const { data: page1 } = await usePageById({ id: 'databaseId' })
const { data: page2 } = await usePageByUri({ uri: 'slug' })
```

#### useNodeByUri

a usefull composable if you want to fetch content by uri, regardless whether it's a page or post type in WordPress.

```ts twoslash
const { data: node } = await useNodeByUri({ uri: 'slug' })
```

an example how to use this for a \[...slug\].vue page:
```ts twoslash
import type { PostFragment, PageFragment } from '#graphql-operations'

const route = useRoute()
const post = ref<PostFragment | PageFragment | null>()
if (route.params?.slug && route.params.slug[0]) {
  const { data } = await useNodeByUri({ uri: route.params.slug[0] })
  post.value = data.value
}
```

#### Menu

```ts twoslash
const { data: mainMenu } = useMenu()
const { data: footerMenu } = await useMenu({ name: 'footer' })
```
if you don't specify a menu name, then WPNuxt will try to fetch the menu with name "main"

#### GeneralSettings

```ts twoslash
const { data: settings } = await useGeneralSettings()
```

#### Viewer

```ts twoslash
const { data: viewer } = await useViewer()
```
Authentication is required to fetch the Viewer

### Based on custom queries

See the advanced section on how to [extend existing queries](../advanced/extending-posts.md) or provide queries for [custom post types](../advanced/custom-post-types.md) or

### Other composables provided by WPNuxt

#### User

getters:
```ts twoslash
const userId = getCurrentUserId()
const userName = getCurrentUserName()
```
Authentication is required to fetch the user information.

methods:
```ts twoslash
const userName = loginUser()
logoutUser()
```
This will be documented in detail on the [authentication](./4.authentication.md) page.

#### Staging

```ts twoslash
const staging = await isStaging()
```
More about this on the [staging](../3.advanced/4.staging.md) page.
